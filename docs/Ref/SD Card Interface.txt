CS - Chip Select (0 for SPI mode)
MOSI - Master Out, Slave In (Write to)
MISO - Master In, Slave Out (Read from)
SCK - Serial Clock
CD - Card Detection
WP - Write Protection

http://nerdclub-uk.blogspot.com/2012/11/how-spi-works-with-sd-card.html
http://nerdclub-uk.blogspot.com/2012/11/reading-and-writing-to-single-sector-on.html
https://luckyresistor.me/cat-protector/software/sdcard-3/

MOSI and MISO are duplex (same time) and serial
SPI is not time dependant (clk happens when master decides)
After executing a command, SD card remains in busy state; poll it for ready (SD holds output pin at 1)  
Use shift registers
Just send 0x00 as dummy data for one-way
BUSY value is 0xFF


>> SD Card commands

  <1 byte command><4 byte params><1 byte checksum>
  Specifically: 0 1 <Command Number (6 bits)> <Arguments (30 bits)> <CRC (7 bits)> 1

  Command format: bit 6 must be 1 for command (0100_0000, 0x40)

  Command 1: 0x40
  Command 2: 0x41
  ... etc
  
  CMD0 - Reset into SPI mode
  CMD1 - Initialize card
  CMD12 - Abort block transfer
  CMD16 - Set block/sector length (length)
  CMD17 - Read (address)
  CMD59 - Turn off CRC

>> SD Card initialization:

  1. Set clock speed to < 400khz
  2. CS = 0
  3. Send about 80 clock pulses
  4. CS = 1
  5. Send CMD0 (soft reset)
  6. Wait until card responds with 0x01 (OK)
  7. Send CMD1 (initialize card)
  8. Keep sending CMD1 until responds with 0x00 (OK)
  9. Send CMD16(512) (0101_0000 0000_0010 0000_0000 0000_0000 0000_0000 ????_????) <- What does the CRC need to be?
  10. Turn off CRC requirement by sending CMD59 (last byte ignored for all future commands)
  11. Wait for OK signal
  12. Set clock speed to whatever (can be over 400khz)


>> Reading from a specific sector

  1. Send CMD17 with sector number: (0101_0001 nnnnnnnn nnnnnnnn nnnnnnnn nnnnnnnn 00000000 CMD_TOKEN)
  2. Send dummy data until recieve 512 bytes.
  3. Close the sector (how?)
  
>> Write to a specific sector

  1. Send CMD24 with sector number: (0101_1000 nnnnnnnn nnnnnnnn nnnnnnnn nnnnnnnn 00000000 CMD_TOKEN)
  2. Send data, recieve dummy data until 512 bytes are transferred
  3. Close the sector (how?)
  
  
  
  
  
  
  
  
  
  
  
  
  
  